# Новая структура страниц (proposed)

## Общий паттерн для каждой бизнес-сущности

Каждая бизнес-сущность (например, Source, Account, Scenario и т.д.) получает собственную директорию в каталоге `src/pages`. Внутри директории реализуются следующие компоненты:

- **Root.tsx** — точка входа, управляет роутингом между вложенными страницами (List, Overview, Form)
- **List.tsx** — отображает список объектов, поддерживает массовые действия, форму добавления нового объекта
- **Overview.tsx** — отображает подробную информацию по одному объекту, содержит формы редактирования и удаления
- **Form.tsx** — отдельная форма для создания или редактирования объекта (используется как в List, так и в Overview)

## Детализация структуры

### Пример структуры для Source

```
/pages/Source/
  Root.tsx         # роутинг: /source, /source/:id, /source/new
  List.tsx         # список источников, массовые действия, форма добавления
  Overview.tsx     # детали источника, формы редактирования/удаления
  Form.tsx         # форма создания/редактирования источника
  index.ts         # реэкспорт компонентов (опционально)
```

### Пример структуры для Account

```
/pages/Account/
  Root.tsx
  List.tsx
  Overview.tsx
  Form.tsx
  index.ts
```

### Пример структуры для Scenario

```
/pages/Scenario/
  Root.tsx
  List.tsx
  Overview.tsx
  Form.tsx
  index.ts
```

### Общие детали и паттерны

- **Root.tsx**
  - Использует `react-router-dom` для организации вложенных маршрутов.
  - Пример маршрутов:
    - `/source` → List
    - `/source/new` → Form (режим создания)
    - `/source/:id` → Overview
    - `/source/:id/edit` → Form (режим редактирования)
  - Может содержать layout/обертку для всех вложенных страниц.

- **List.tsx**
  - Получает список объектов через API.
  - Отображает таблицу/список, поддерживает сортировку, фильтрацию, массовые действия (delete, export и т.д.).
  - Встраивает форму добавления нового объекта (inline или модально).
  - Кнопки/ссылки для перехода к Overview и Form.

- **Overview.tsx**
  - Получает объект по id.
  - Показывает все поля, связанные сущности, историю изменений и т.д.
  - Встраивает формы редактирования и удаления (inline или через переход на Form).

- **Form.tsx**
  - Универсальная форма для создания и редактирования.
  - Используется как в List (добавление), так и в Overview (редактирование).
  - Валидация, отправка данных, обработка ошибок.

- **index.ts**
  - Реэкспорт всех компонентов для удобства импорта.

### Паттерны именования и импорта

- Все компоненты именуются строго по шаблону: `Root`, `List`, `Overview`, `Form`.
- Импортируются через index.ts: `import {Root as SourceRoot} from './Source'`.
- Для вложенных сущностей структура повторяется (например, если у Source есть вложенные Items, создается /Source/Item/ с теми же паттернами).

### Пример использования роутинга в Root.tsx

```tsx
import {Routes, Route} from 'react-router-dom';
import {List, Overview, Form} from './';

export const Root = () => (
  <Routes>
    <Route path="" element={<List />} />
    <Route path="new" element={<Form mode="create" />} />
    <Route path=":id" element={<Overview />} />
    <Route path=":id/edit" element={<Form mode="edit" />} />
  </Routes>
);
```

### Общие плюсы структуры

- Единообразие для всех сущностей
- Легко масштабируется
- Упрощает навигацию и поддержку кода
- Четкое разделение ответственности между компонентами

---

**Эта структура заменяет текущую плоскую и частично вложенную организацию страниц на модульную, с четкой специализацией компонентов и единым паттерном для всех бизнес-единиц.** 